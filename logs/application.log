2025-11-13T14:09:09.643+08:00  INFO 1 --- [TEST-ENV-VAR] [main] com.wms.wmdrfid.WmdRfidApplication       : Starting WmdRfidApplication v0.0.1-SNAPSHOT using Java 17.0.17 with PID 1 (/app/app.jar started by root in /app)
2025-11-13T14:09:09.661+08:00 DEBUG 1 --- [TEST-ENV-VAR] [main] com.wms.wmdrfid.WmdRfidApplication       : Running with Spring Boot v3.4.1, Spring v6.2.1
2025-11-13T14:09:09.662+08:00  INFO 1 --- [TEST-ENV-VAR] [main] com.wms.wmdrfid.WmdRfidApplication       : No active profile set, falling back to 1 default profile: "default"
2025-11-13T14:09:10.682+08:00  INFO 1 --- [TEST-ENV-VAR] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13T14:09:10.686+08:00  INFO 1 --- [TEST-ENV-VAR] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-13T14:09:10.727+08:00  INFO 1 --- [TEST-ENV-VAR] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 23 ms. Found 0 Redis repository interfaces.
2025-11-13T14:09:10.857+08:00  INFO 1 --- [TEST-ENV-VAR] [main] faultConfiguringBeanFactoryPostProcessor : No bean named 'errorChannel' has been explicitly defined. Therefore, a default PublishSubscribeChannel will be created.
2025-11-13T14:09:10.871+08:00  INFO 1 --- [TEST-ENV-VAR] [main] faultConfiguringBeanFactoryPostProcessor : No bean named 'integrationHeaderChannelRegistry' has been explicitly defined. Therefore, a default DefaultHeaderChannelRegistry will be created.
2025-11-13T14:09:11.653+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-13T14:09:11.676+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-13T14:09:11.677+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-11-13T14:09:11.734+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-13T14:09:11.735+08:00  INFO 1 --- [TEST-ENV-VAR] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2002 ms
2025-11-13T14:09:14.652+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.i.endpoint.EventDrivenConsumer       : Adding {logging-channel-adapter:_org.springframework.integration.errorLogger} as a subscriber to the 'errorChannel' channel
2025-11-13T14:09:14.655+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.i.channel.PublishSubscribeChannel    : Channel 'TEST-ENV-VAR.errorChannel' has 1 subscriber(s).
2025-11-13T14:09:14.657+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.i.endpoint.EventDrivenConsumer       : started bean '_org.springframework.integration.errorLogger'
2025-11-13T14:09:14.660+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.i.endpoint.EventDrivenConsumer       : Adding {message-handler:mqttOutbound.serviceActivator} as a subscriber to the 'mqttOutboundChannel' channel
2025-11-13T14:09:14.661+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.integration.channel.DirectChannel    : Channel 'TEST-ENV-VAR.mqttOutboundChannel' has 1 subscriber(s).
2025-11-13T14:09:14.662+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.i.endpoint.EventDrivenConsumer       : started bean 'mqttOutbound.serviceActivator'
2025-11-13T14:09:14.663+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.i.endpoint.EventDrivenConsumer       : Adding {service-activator:mqttMessageHandler.handleMessage.serviceActivator} as a subscriber to the 'mqttInputChannel' channel
2025-11-13T14:09:14.664+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.integration.channel.DirectChannel    : Channel 'TEST-ENV-VAR.mqttInputChannel' has 1 subscriber(s).
2025-11-13T14:09:14.667+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.i.endpoint.EventDrivenConsumer       : started bean 'mqttMessageHandler.handleMessage.serviceActivator'
2025-11-13T14:09:14.730+08:00 ERROR 1 --- [TEST-ENV-VAR] [main] .m.i.MqttPahoMessageDrivenChannelAdapter : Exception while connecting

org.eclipse.paho.client.mqttv3.MqttException: Unable to connect to server
	at org.eclipse.paho.client.mqttv3.internal.TCPNetworkModule.start(TCPNetworkModule.java:80) ~[org.eclipse.paho.client.mqttv3-1.2.5.jar!/:na]
	at org.eclipse.paho.client.mqttv3.internal.ClientComms$ConnectBG.run(ClientComms.java:724) ~[org.eclipse.paho.client.mqttv3-1.2.5.jar!/:na]
	at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]
Caused by: java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.pollConnectNow(Unknown Source) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(Unknown Source) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(Unknown Source) ~[na:na]
	at java.base/java.net.SocksSocketImpl.connect(Unknown Source) ~[na:na]
	at java.base/java.net.Socket.connect(Unknown Source) ~[na:na]
	at org.eclipse.paho.client.mqttv3.internal.TCPNetworkModule.start(TCPNetworkModule.java:74) ~[org.eclipse.paho.client.mqttv3-1.2.5.jar!/:na]
	... 2 common frames omitted

2025-11-13T14:09:14.742+08:00  INFO 1 --- [TEST-ENV-VAR] [main] .m.i.MqttPahoMessageDrivenChannelAdapter : started bean 'inbound'; defined in: 'class path resource [com/wms/wmdrfid/Conf/MqttConf/MqttConfig.class]'; from source: 'com.wms.wmdrfid.Conf.MqttConf.MqttConfig.inbound()'
2025-11-13T14:09:14.775+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-13T14:09:15.319+08:00  INFO 1 --- [TEST-ENV-VAR] [main] com.wms.wmdrfid.WmdRfidApplication       : Started WmdRfidApplication in 6.364 seconds (process running for 7.346)
2025-11-13T14:09:18.425+08:00  INFO 1 --- [TEST-ENV-VAR] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-13T14:09:18.426+08:00  INFO 1 --- [TEST-ENV-VAR] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-13T14:09:18.430+08:00  INFO 1 --- [TEST-ENV-VAR] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2025-11-13T14:09:27.364+08:00  INFO 1 --- [TEST-ENV-VAR] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-13T14:09:27.366+08:00  INFO 1 --- [TEST-ENV-VAR] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-13T14:09:27.370+08:00 ERROR 1 --- [TEST-ENV-VAR] [SpringApplicationShutdownHook] .m.i.MqttPahoMessageDrivenChannelAdapter : Exception while unsubscribing

org.eclipse.paho.client.mqttv3.MqttException: Client is not connected
	at org.eclipse.paho.client.mqttv3.internal.ExceptionHelper.createMqttException(ExceptionHelper.java:31) ~[org.eclipse.paho.client.mqttv3-1.2.5.jar!/:na]
	at org.eclipse.paho.client.mqttv3.internal.ClientComms.sendNoWait(ClientComms.java:205) ~[org.eclipse.paho.client.mqttv3-1.2.5.jar!/:na]
	at org.eclipse.paho.client.mqttv3.MqttAsyncClient.unsubscribe(MqttAsyncClient.java:1244) ~[org.eclipse.paho.client.mqttv3-1.2.5.jar!/:na]
	at org.eclipse.paho.client.mqttv3.MqttAsyncClient.unsubscribe(MqttAsyncClient.java:1195) ~[org.eclipse.paho.client.mqttv3-1.2.5.jar!/:na]
	at org.springframework.integration.mqtt.inbound.MqttPahoMessageDrivenChannelAdapter.doStop(MqttPahoMessageDrivenChannelAdapter.java:215) ~[spring-integration-mqtt-6.4.1.jar!/:6.4.1]
	at org.springframework.integration.endpoint.AbstractEndpoint.doStop(AbstractEndpoint.java:211) ~[spring-integration-core-6.4.1.jar!/:6.4.1]
	at org.springframework.integration.endpoint.AbstractEndpoint.stop(AbstractEndpoint.java:192) ~[spring-integration-core-6.4.1.jar!/:6.4.1]
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384) ~[spring-context-6.2.1.jar!/:6.2.1]
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526) ~[spring-context-6.2.1.jar!/:6.2.1]
	at java.base/java.lang.Iterable.forEach(Unknown Source) ~[na:na]
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353) ~[spring-context-6.2.1.jar!/:6.2.1]
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253) ~[spring-context-6.2.1.jar!/:6.2.1]
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172) ~[spring-context-6.2.1.jar!/:6.2.1]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174) ~[spring-boot-3.4.1.jar!/:3.4.1]
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126) ~[spring-context-6.2.1.jar!/:6.2.1]
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147) ~[spring-boot-3.4.1.jar!/:3.4.1]
	at java.base/java.lang.Iterable.forEach(Unknown Source) ~[na:na]
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116) ~[spring-boot-3.4.1.jar!/:3.4.1]
	at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]

2025-11-13T14:10:42.774+08:00  INFO 1 --- [TEST-ENV-VAR] [main] com.wms.wmdrfid.WmdRfidApplication       : Starting WmdRfidApplication v0.0.1-SNAPSHOT using Java 17.0.17 with PID 1 (/app/app.jar started by root in /app)
2025-11-13T14:10:42.776+08:00 DEBUG 1 --- [TEST-ENV-VAR] [main] com.wms.wmdrfid.WmdRfidApplication       : Running with Spring Boot v3.4.1, Spring v6.2.1
2025-11-13T14:10:42.778+08:00  INFO 1 --- [TEST-ENV-VAR] [main] com.wms.wmdrfid.WmdRfidApplication       : No active profile set, falling back to 1 default profile: "default"
2025-11-13T14:10:43.551+08:00  INFO 1 --- [TEST-ENV-VAR] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13T14:10:43.553+08:00  INFO 1 --- [TEST-ENV-VAR] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-13T14:10:43.596+08:00  INFO 1 --- [TEST-ENV-VAR] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 23 ms. Found 0 Redis repository interfaces.
2025-11-13T14:10:43.715+08:00  INFO 1 --- [TEST-ENV-VAR] [main] faultConfiguringBeanFactoryPostProcessor : No bean named 'errorChannel' has been explicitly defined. Therefore, a default PublishSubscribeChannel will be created.
2025-11-13T14:10:43.726+08:00  INFO 1 --- [TEST-ENV-VAR] [main] faultConfiguringBeanFactoryPostProcessor : No bean named 'integrationHeaderChannelRegistry' has been explicitly defined. Therefore, a default DefaultHeaderChannelRegistry will be created.
2025-11-13T14:10:44.158+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-13T14:10:44.168+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-13T14:10:44.169+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-11-13T14:10:44.197+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-13T14:10:44.198+08:00  INFO 1 --- [TEST-ENV-VAR] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1376 ms
2025-11-13T14:10:46.038+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.i.endpoint.EventDrivenConsumer       : Adding {logging-channel-adapter:_org.springframework.integration.errorLogger} as a subscriber to the 'errorChannel' channel
2025-11-13T14:10:46.039+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.i.channel.PublishSubscribeChannel    : Channel 'TEST-ENV-VAR.errorChannel' has 1 subscriber(s).
2025-11-13T14:10:46.041+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.i.endpoint.EventDrivenConsumer       : started bean '_org.springframework.integration.errorLogger'
2025-11-13T14:10:46.042+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.i.endpoint.EventDrivenConsumer       : Adding {message-handler:mqttOutbound.serviceActivator} as a subscriber to the 'mqttOutboundChannel' channel
2025-11-13T14:10:46.044+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.integration.channel.DirectChannel    : Channel 'TEST-ENV-VAR.mqttOutboundChannel' has 1 subscriber(s).
2025-11-13T14:10:46.045+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.i.endpoint.EventDrivenConsumer       : started bean 'mqttOutbound.serviceActivator'
2025-11-13T14:10:46.046+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.i.endpoint.EventDrivenConsumer       : Adding {service-activator:mqttMessageHandler.handleMessage.serviceActivator} as a subscriber to the 'mqttInputChannel' channel
2025-11-13T14:10:46.047+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.integration.channel.DirectChannel    : Channel 'TEST-ENV-VAR.mqttInputChannel' has 1 subscriber(s).
2025-11-13T14:10:46.048+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.i.endpoint.EventDrivenConsumer       : started bean 'mqttMessageHandler.handleMessage.serviceActivator'
2025-11-13T14:10:46.085+08:00 ERROR 1 --- [TEST-ENV-VAR] [main] .m.i.MqttPahoMessageDrivenChannelAdapter : Exception while connecting

org.eclipse.paho.client.mqttv3.MqttException: Unable to connect to server
	at org.eclipse.paho.client.mqttv3.internal.TCPNetworkModule.start(TCPNetworkModule.java:80) ~[org.eclipse.paho.client.mqttv3-1.2.5.jar!/:na]
	at org.eclipse.paho.client.mqttv3.internal.ClientComms$ConnectBG.run(ClientComms.java:724) ~[org.eclipse.paho.client.mqttv3-1.2.5.jar!/:na]
	at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]
Caused by: java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.pollConnectNow(Unknown Source) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(Unknown Source) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(Unknown Source) ~[na:na]
	at java.base/java.net.SocksSocketImpl.connect(Unknown Source) ~[na:na]
	at java.base/java.net.Socket.connect(Unknown Source) ~[na:na]
	at org.eclipse.paho.client.mqttv3.internal.TCPNetworkModule.start(TCPNetworkModule.java:74) ~[org.eclipse.paho.client.mqttv3-1.2.5.jar!/:na]
	... 2 common frames omitted

2025-11-13T14:10:46.094+08:00  INFO 1 --- [TEST-ENV-VAR] [main] .m.i.MqttPahoMessageDrivenChannelAdapter : started bean 'inbound'; defined in: 'class path resource [com/wms/wmdrfid/Conf/MqttConf/MqttConfig.class]'; from source: 'com.wms.wmdrfid.Conf.MqttConf.MqttConfig.inbound()'
2025-11-13T14:10:46.108+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-13T14:10:46.497+08:00  INFO 1 --- [TEST-ENV-VAR] [main] com.wms.wmdrfid.WmdRfidApplication       : Started WmdRfidApplication in 4.289 seconds (process running for 4.883)
2025-11-13T14:10:46.773+08:00  INFO 1 --- [TEST-ENV-VAR] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-13T14:10:46.775+08:00  INFO 1 --- [TEST-ENV-VAR] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-13T14:10:46.779+08:00  INFO 1 --- [TEST-ENV-VAR] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-11-13T14:19:26.086+08:00  INFO 1 --- [TEST-ENV-VAR] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-13T14:19:26.090+08:00  INFO 1 --- [TEST-ENV-VAR] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-13T14:19:26.096+08:00 ERROR 1 --- [TEST-ENV-VAR] [SpringApplicationShutdownHook] .m.i.MqttPahoMessageDrivenChannelAdapter : Exception while unsubscribing

org.eclipse.paho.client.mqttv3.MqttException: Client is not connected
	at org.eclipse.paho.client.mqttv3.internal.ExceptionHelper.createMqttException(ExceptionHelper.java:31) ~[org.eclipse.paho.client.mqttv3-1.2.5.jar!/:na]
	at org.eclipse.paho.client.mqttv3.internal.ClientComms.sendNoWait(ClientComms.java:205) ~[org.eclipse.paho.client.mqttv3-1.2.5.jar!/:na]
	at org.eclipse.paho.client.mqttv3.MqttAsyncClient.unsubscribe(MqttAsyncClient.java:1244) ~[org.eclipse.paho.client.mqttv3-1.2.5.jar!/:na]
	at org.eclipse.paho.client.mqttv3.MqttAsyncClient.unsubscribe(MqttAsyncClient.java:1195) ~[org.eclipse.paho.client.mqttv3-1.2.5.jar!/:na]
	at org.springframework.integration.mqtt.inbound.MqttPahoMessageDrivenChannelAdapter.doStop(MqttPahoMessageDrivenChannelAdapter.java:215) ~[spring-integration-mqtt-6.4.1.jar!/:6.4.1]
	at org.springframework.integration.endpoint.AbstractEndpoint.doStop(AbstractEndpoint.java:211) ~[spring-integration-core-6.4.1.jar!/:6.4.1]
	at org.springframework.integration.endpoint.AbstractEndpoint.stop(AbstractEndpoint.java:192) ~[spring-integration-core-6.4.1.jar!/:6.4.1]
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:384) ~[spring-context-6.2.1.jar!/:6.2.1]
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:526) ~[spring-context-6.2.1.jar!/:6.2.1]
	at java.base/java.lang.Iterable.forEach(Unknown Source) ~[na:na]
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:353) ~[spring-context-6.2.1.jar!/:6.2.1]
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:253) ~[spring-context-6.2.1.jar!/:6.2.1]
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172) ~[spring-context-6.2.1.jar!/:6.2.1]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:174) ~[spring-boot-3.4.1.jar!/:3.4.1]
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126) ~[spring-context-6.2.1.jar!/:6.2.1]
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147) ~[spring-boot-3.4.1.jar!/:3.4.1]
	at java.base/java.lang.Iterable.forEach(Unknown Source) ~[na:na]
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116) ~[spring-boot-3.4.1.jar!/:3.4.1]
	at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]

2025-11-13T14:19:37.717+08:00  INFO 1 --- [TEST-ENV-VAR] [main] com.wms.wmdrfid.WmdRfidApplication       : Starting WmdRfidApplication v0.0.1-SNAPSHOT using Java 17.0.17 with PID 1 (/app/app.jar started by root in /app)
2025-11-13T14:19:37.720+08:00 DEBUG 1 --- [TEST-ENV-VAR] [main] com.wms.wmdrfid.WmdRfidApplication       : Running with Spring Boot v3.4.1, Spring v6.2.1
2025-11-13T14:19:37.724+08:00  INFO 1 --- [TEST-ENV-VAR] [main] com.wms.wmdrfid.WmdRfidApplication       : No active profile set, falling back to 1 default profile: "default"
2025-11-13T14:19:38.469+08:00  INFO 1 --- [TEST-ENV-VAR] [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13T14:19:38.471+08:00  INFO 1 --- [TEST-ENV-VAR] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-13T14:19:38.502+08:00  INFO 1 --- [TEST-ENV-VAR] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 18 ms. Found 0 Redis repository interfaces.
2025-11-13T14:19:38.596+08:00  INFO 1 --- [TEST-ENV-VAR] [main] faultConfiguringBeanFactoryPostProcessor : No bean named 'errorChannel' has been explicitly defined. Therefore, a default PublishSubscribeChannel will be created.
2025-11-13T14:19:38.603+08:00  INFO 1 --- [TEST-ENV-VAR] [main] faultConfiguringBeanFactoryPostProcessor : No bean named 'integrationHeaderChannelRegistry' has been explicitly defined. Therefore, a default DefaultHeaderChannelRegistry will be created.
2025-11-13T14:19:39.066+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-13T14:19:39.078+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-13T14:19:39.080+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.34]
2025-11-13T14:19:39.116+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-11-13T14:19:39.118+08:00  INFO 1 --- [TEST-ENV-VAR] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1331 ms
2025-11-13T14:19:41.186+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.i.endpoint.EventDrivenConsumer       : Adding {logging-channel-adapter:_org.springframework.integration.errorLogger} as a subscriber to the 'errorChannel' channel
2025-11-13T14:19:41.188+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.i.channel.PublishSubscribeChannel    : Channel 'TEST-ENV-VAR.errorChannel' has 1 subscriber(s).
2025-11-13T14:19:41.189+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.i.endpoint.EventDrivenConsumer       : started bean '_org.springframework.integration.errorLogger'
2025-11-13T14:19:41.191+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.i.endpoint.EventDrivenConsumer       : Adding {message-handler:mqttOutbound.serviceActivator} as a subscriber to the 'mqttOutboundChannel' channel
2025-11-13T14:19:41.192+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.integration.channel.DirectChannel    : Channel 'TEST-ENV-VAR.mqttOutboundChannel' has 1 subscriber(s).
2025-11-13T14:19:41.192+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.i.endpoint.EventDrivenConsumer       : started bean 'mqttOutbound.serviceActivator'
2025-11-13T14:19:41.193+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.i.endpoint.EventDrivenConsumer       : Adding {service-activator:mqttMessageHandler.handleMessage.serviceActivator} as a subscriber to the 'mqttInputChannel' channel
2025-11-13T14:19:41.194+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.integration.channel.DirectChannel    : Channel 'TEST-ENV-VAR.mqttInputChannel' has 1 subscriber(s).
2025-11-13T14:19:41.194+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.i.endpoint.EventDrivenConsumer       : started bean 'mqttMessageHandler.handleMessage.serviceActivator'
2025-11-13T14:19:41.230+08:00 ERROR 1 --- [TEST-ENV-VAR] [main] .m.i.MqttPahoMessageDrivenChannelAdapter : Exception while connecting

org.eclipse.paho.client.mqttv3.MqttException: Unable to connect to server
	at org.eclipse.paho.client.mqttv3.internal.TCPNetworkModule.start(TCPNetworkModule.java:80) ~[org.eclipse.paho.client.mqttv3-1.2.5.jar!/:na]
	at org.eclipse.paho.client.mqttv3.internal.ClientComms$ConnectBG.run(ClientComms.java:724) ~[org.eclipse.paho.client.mqttv3-1.2.5.jar!/:na]
	at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]
Caused by: java.net.ConnectException: Connection refused
	at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]
	at java.base/sun.nio.ch.Net.pollConnectNow(Unknown Source) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(Unknown Source) ~[na:na]
	at java.base/sun.nio.ch.NioSocketImpl.connect(Unknown Source) ~[na:na]
	at java.base/java.net.SocksSocketImpl.connect(Unknown Source) ~[na:na]
	at java.base/java.net.Socket.connect(Unknown Source) ~[na:na]
	at org.eclipse.paho.client.mqttv3.internal.TCPNetworkModule.start(TCPNetworkModule.java:74) ~[org.eclipse.paho.client.mqttv3-1.2.5.jar!/:na]
	... 2 common frames omitted

2025-11-13T14:19:41.239+08:00  INFO 1 --- [TEST-ENV-VAR] [main] .m.i.MqttPahoMessageDrivenChannelAdapter : started bean 'inbound'; defined in: 'class path resource [com/wms/wmdrfid/Conf/MqttConf/MqttConfig.class]'; from source: 'com.wms.wmdrfid.Conf.MqttConf.MqttConfig.inbound()'
2025-11-13T14:19:41.256+08:00  INFO 1 --- [TEST-ENV-VAR] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-11-13T14:19:41.602+08:00  INFO 1 --- [TEST-ENV-VAR] [main] com.wms.wmdrfid.WmdRfidApplication       : Started WmdRfidApplication in 4.417 seconds (process running for 4.84)
2025-11-13T14:19:41.887+08:00  INFO 1 --- [TEST-ENV-VAR] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-13T14:19:41.889+08:00  INFO 1 --- [TEST-ENV-VAR] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-13T14:19:41.892+08:00  INFO 1 --- [TEST-ENV-VAR] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
